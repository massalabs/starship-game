import {
  call,
  Address,
  currentPeriod,
  currentThread,
  sendMessage,
} from '@massalabs/massa-as-sdk/assembly';

/**
 * Main function called at smart contract runtime.
 *
 * @param {string} _ - unused but mandatory. See https://github.com/massalabs/massa-sc-std/issues/18
 * @return {i32} - ?
 */
export function main(_: string): i32 {
  // eslint-disable-line @typescript-eslint/no-unused-vars
  const scAddress = Address.fromByteString('{{gameAddress}}');

  /*
  const curThread = currentThread();
  const curPeriod = currentPeriod();
  let nextThread = curThread + 1;
  let nextPeriod = curPeriod;
  sendMessage(
      scAddress,
      'asyncCreateCollectibles',
      nextPeriod, // validityStartPeriod
      nextThread, // validityStartThread
      nextPeriod + 5, // validityEndPeriod
      nextThread, // validityEndThread
      70000000,
      0,
      0,
      ''
  );
  */


  call(scAddress, 'asyncCreateCollectibles', '', 0);
  return 0;
}
